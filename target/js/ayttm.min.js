/*
    _   ___                        __            __  _
   / | / (_)________  ____  ____  / /_  ______  / /_(_)____
  /  |/ / / ___/ __ \/ __ \/ __ \/ / / / / __ \/ __/ / ___/
 / /|  / / /__/ /_/ / /_/ / /_/ / / /_/ / /_/ / /_/ / /__
/_/ |_/_/\___/\____/ .___/\____/_/\__, / .___/\__/_/\___/
                  /_/            /____/_/
 
*/var ayttm;!function(a){var b=function(){function b(a,b,c,d){this.name=a,this.out=b,this.propositions=c,this.negatedPropositions=d,this.final=!1}return b.prototype.toString=function(){return this.name},b.prototype.toPrettyString=function(){return"{ name: "+this.name+", propositions : {"+this.propositions.map(function(a){return a.toPrettyString()}).join(",")+"}, negatedPropositions : {"+this.negatedPropositions.map(function(a){return a.toPrettyString()}).join(",")+"}, out : {"+this.out.toArray().map(function(a){return a.name}).join(", ")+"} }, final : "+this.final+"}\n"},b.initialState=function(){return new b(a.GraphNode.initialNodeName,a.Set.empty(),new Array,new Array)},b}(),c=function(){function c(){this.documentService=new a.BasicUIDocumentService(this),this.lastEvents=new a.Map}return c.fromExpression=function(b){if(!a.checkForRestrictionsOnTriggers(b))throw"Expression cannot contain triggers in both subexpressions of And, Until or Release. "+b.toPrettyString();a.Logger.debug("Generating automaton for:"),a.Logger.debug(b);var c=this.fromGraphNodes(a.GraphFactory.createGraph(b));return c.addListenersToDocumentFromExpression(b),c},c.fromGraphNodes=function(d){var e=d.toArray(),f=a.Set.empty();e.forEach(function(c){f.add(new b(c.name,a.Set.empty(),c.oldExpressions.filter(function(b){return 0==b.type&&b!==a.True}).toArray(),c.oldExpressions.filter(function(a){return 1==a.type&&0==a.subExpression1().type}).toArray().map(function(a){return a.subExpression1()})))});var g=new c;g.initialState=b.initialState(),f.add(g.initialState),e.forEach(function(a){a.incomingNodes.toArray().forEach(function(b){var c=f.valueForKey(a.name),d=f.valueForKey(b.name);d.out.add(c)})});var h=f.filter(function(a){return 0===a.propositions.length&&0===a.negatedPropositions.length&&1==a.out.size()&&a.out.contains(a)});return f.toArray().forEach(function(a){a.final=a.out.intersects(h)}),g.currentStates=a.Set.singleton(g.initialState),g.states=f,a.Logger.debug("Generated automaton:"),a.Logger.debug(g),g},c.prototype.toString=function(){return this.states.toArray().map(function(a){return a.toPrettyString()}).join(", ")},c.prototype.keyForLTLEvent=function(a){return[a.name,a.css].toString()},c.prototype.accept=function(b){var c=this;a.Logger.debug("Received "+(b.css?b.css+":":"")+b.name);var d=this.lastEvents.valueForKey(this.keyForLTLEvent(b));b.previousEvent=d?d:b.source,b.otherPreviousEvent=this.lastLTLEvent?this.lastLTLEvent.source:b.source;var e=a.Set.empty();this.currentStates.toArray().forEach(function(a){c.currentStates.remove(a),e.addAll(a.out)}),e.toArray().forEach(function(a){c.eventDoesSatisfyState(b,a)&&c.currentStates.add(a)});var f=this.currentStates.toArray().filter(function(a){return a.propositions.length>0});f.length>0&&(this.currentStates=a.Set.fromArray(f)),this.currentStates.filter(function(a){return a.final}).size()>0&&(a.Logger.debug("Reached a final state."),a.Logger.debug("Reset."),this.currentStates.clear(),this.currentStates.add(this.initialState),this.documentService.clearTimeout()),this.currentStates.isEmpty()?(a.Logger.debug((b.css?b.css+":":"")+b.name+" rejected. Reset."),this.currentStates.add(this.initialState),this.documentService.clearTimeout()):(this.lastLTLEvent=b,this.lastEvents.put(this.keyForLTLEvent(b),b.source)),a.Logger.debug("New current States are:\n "),this.currentStates.toArray().forEach(function(b){a.Logger.debug("	"+b.name+"\n")})},c.prototype.eventDoesSatisfyState=function(a,b){for(var c in b.negatedPropositions)if(b.negatedPropositions[c].matches(a))return!1;var d=new Array;for(var c in b.propositions){if(!b.propositions[c].matches(a))return!1;b.propositions[c].hasTrigger()&&d.push(b.propositions[c])}return d.forEach(function(b){b.applyTrigger(a)}),!0},c.prototype.addListenersToDocumentFromExpression=function(b){var c=a.Set.empty(),d=new Array;for(d.push(b);d.length>0;){var e=d.pop();switch(e.type){case 6:case 1:d.push(e.subExpression1());break;case 0:e instanceof a.PropositionWithSymbolicTrigger&&(e.event.trigger=e.symbolicTrigger.callbackFromDocumentService(this.documentService)),e.isDOMEvent()&&!c.contains([e.event.css,e.event.name])&&(this.documentService.addListenerToDocumentElements(e.event.css,e.event.name),c.add([e.event.css,e.event.name]));break;case 3:case 4:case 2:case 5:d.push(e.subExpression1()),d.push(e.subExpression2())}}},c}();a.Automaton=c}(ayttm||(ayttm={}));var ayttm;!function(a){a._=function(a){return(new b)._(a)},a._.mousemoveTracker=function(b,c){return new a.TrackMouseMovement(b,c)},a._.timer=function(b){return new a.StartTimer(b)},a._.toggleClass=function(b,c){return new a.ToggleClass(b,c)},a._.addClass=function(b,c){return new a.AddClass(b,c)},a._.removeClass=function(b,c){return new a.RemoveClass(b,c)},a._.timout=function(){return{name:"timeout"}};var b=function(){function b(){this.expressionStack=new Array}return b.prototype.buildExpression=function(){return this.expressionStack.length>0&&(this.expression=this.unwindTheStack()),this.expression},b.prototype.and=function(a){return this.pushBinaryExpressionsToStack(2,a),this},b.prototype.or=function(a){return this.pushBinaryExpressionsToStack(3,a),this},b.prototype.until=function(a){return this.pushBinaryExpressionsToStack(4,a),this},b.prototype.release=function(a){return this.pushBinaryExpressionsToStack(5,a),this},b.prototype.next=function(a){return this.pushUnaryExpressionsToStack(6,a),this},b.prototype.not=function(a){return this.pushUnaryExpressionsToStack(1,a),this},b.prototype.unshift=function(a){this.expressionStack.unshift({type:a})},b.prototype.pushUnaryExpressionsToStack=function(c,d){if(d){if(d instanceof b)d.unshift(c);else{var e=a._();e.expressionStack.push({type:c}),e.expressionStack.push({expression:this.expressionFromObject(d)}),d=this.expressionFromObject(e)}this.expressionStack.push({expression:this.expressionFromObject(d)})}else this.expressionStack.push({type:c})},b.prototype.pushBinaryExpressionsToStack=function(a,b){b?this.expressionStack.push({type:a},{expression:this.expressionFromObject(b)}):this.expressionStack.push({type:a})},b.prototype.expressionFromObject=function(c){if(c instanceof a.Expression)return c;if(c instanceof b)return c.buildExpression();if(c instanceof Array){var d,e=c;if(e.length>0){d=this.expressionFromObject(e[0]);for(var f=1;f<e.length;++f)d=new a.Or(d,this.expressionFromObject(e[f]));return d}}return c.name?new a.Proposition(c):void a.Logger.error("illegal argument "+c.toString())},b.prototype._=function(a){return a&&("object"==typeof a?this.expressionStack.push({expression:this.expressionFromObject(a)}):"string"==typeof a&&(this.cssSelector=a)),this},b.prototype.with=function(b){var c=this.expressionStack.pop();if(!(c&&c.expression&&c.expression instanceof a.Proposition))throw"Illegal state: with must be called on a proposition";if("object"==typeof b&&b.callbackFromDocumentService)this.expressionStack.push({expression:new a.PropositionWithSymbolicTrigger(c.expression.event,b)});else{if("function"!=typeof b)throw"Illegal argument: with(t) expects t to be a trigger argument";c.expression.event.trigger=b,this.expressionStack.push(c)}return this},b.prototype.unwindTheStack=function(){for(var b,c;this.expressionStack.length>0;){var d=this.expressionStack.pop();if(d.type)switch(d.type){case 1:b=new a.Not(b);break;case 6:b=new a.Next(b);break;case 2:case 3:case 4:case 5:c=d.type}else if(c){switch(c){case 2:b=new a.And(d.expression,b);break;case 3:b=new a.Or(d.expression,b);break;case 4:b=new a.Until(d.expression,b);break;case 5:b=new a.Release(d.expression,b)}c=void 0}else b=d.expression}return b},b.prototype.__=function(){a.Automaton.fromExpression(this.buildExpression())},b.prototype.andNext=function(a){return this.and(),this.next(a),this},b.prototype.filter=function(b){var c=this.expressionStack.pop();if(c&&c.expression&&c.expression instanceof a.Proposition)return c.expression.event.filter=b,this.expressionStack.push(c),this;throw"Illegal state exception: filter must be applied to a proposition."},b.prototype.abort=function(){return this._({name:"abort",css:this.cssSelector}),this},b.prototype.DOMActivate=function(){return this._({name:"DOMActivate",css:this.cssSelector}),this},b.prototype.error=function(){return this._({name:"error",css:this.cssSelector}),this},b.prototype.load=function(){return this._({name:"load",css:this.cssSelector}),this},b.prototype.resize=function(){return this._({name:"resize",css:this.cssSelector}),this},b.prototype.scroll=function(){return this._({name:"scroll",css:this.cssSelector}),this},b.prototype.select=function(){return this._({name:"select",css:this.cssSelector}),this},b.prototype.unload=function(){return this._({name:"unload",css:this.cssSelector}),this},b.prototype.wheel=function(){return this._({name:"wheel",css:this.cssSelector}),this},b.prototype.keydown=function(){return this._({name:"keydown",css:this.cssSelector}),this},b.prototype.shiftkeydown=function(){return this._({name:"keydown",css:this.cssSelector,filter:function(a){return a.source.shiftKey}}),this},b.prototype.shiftkeyup=function(){return this._({name:"keyup",css:this.cssSelector,filter:function(a){return a.source.shiftKey}}),this},b.prototype.keypress=function(){return this._({name:"keypress",css:this.cssSelector}),this},b.prototype.keyup=function(){return this._({name:"keyup",css:this.cssSelector}),this},b.prototype.touchcancel=function(){return this._({name:"touchcancel",css:this.cssSelector}),this},b.prototype.touchend=function(){return this._({name:"touchend",css:this.cssSelector}),this},b.prototype.touchenter=function(){return this._({name:"touchenter",css:this.cssSelector}),this},b.prototype.touchleave=function(){return this._({name:"touchleave",css:this.cssSelector}),this},b.prototype.touchmove=function(){return this._({name:"touchmove",css:this.cssSelector}),this},b.prototype.touchstart=function(){return this._({name:"touchstart",css:this.cssSelector}),this},b.prototype.transitionend=function(){return this._({name:"transitionend",css:this.cssSelector}),this},b.prototype.click=function(){return this._({name:"click",css:this.cssSelector}),this},b.prototype.contextmenu=function(){return this._({name:"contextmenu",css:this.cssSelector}),this},b.prototype.dblclick=function(){return this._({name:"dblclick",css:this.cssSelector}),this},b.prototype.mousedown=function(){return this._({name:"mousedown",css:this.cssSelector}),this},b.prototype.mouseenter=function(){return this._({name:"mouseenter",css:this.cssSelector}),this},b.prototype.mouseleave=function(){return this._({name:"mouseleave",css:this.cssSelector}),this},b.prototype.mousemove=function(){return this._({name:"mousemove",css:this.cssSelector}),this},b.prototype.mouseout=function(){return this._({name:"mouseout",css:this.cssSelector}),this},b.prototype.mouseover=function(){return this._({name:"mouseover",css:this.cssSelector}),this},b.prototype.mouseup=function(){return this._({name:"mouseup",css:this.cssSelector}),this},b.prototype.show=function(){return this._({name:"show",css:this.cssSelector}),this},b.prototype.onchange=function(){return this._({name:"onchange",css:this.cssSelector}),this},b}();a.ExpressionBuilder=b}(ayttm||(ayttm={}));var ayttm;!function(a){var b=function(){function b(){}return b.expand=function(c,d){if(c.newExpressions.isEmpty()){var e=d.filterOne(b.loopPredicate(c));if(null!=e)return e.incomingNodes.addAll(c.incomingNodes),d;var f=a.GraphNode.newName();return b.expand(new a.GraphNode(f,a.Set.singleton(c),c.nextExpressions.clone(),a.Set.empty(),a.Set.empty()),(new a.Set).addAll(d).add(c))}var g=c.newExpressions.item();if(c.newExpressions.remove(g),0==g.type||1==g.type&&0==g.subExpression1().type)return g===a.False?d:(c.oldExpressions=(new a.Set).addAll(c.oldExpressions).add(g),b.expand(c,d));switch(g.type){case 4:case 5:case 3:var h=new a.GraphNode(a.GraphNode.newName(),c.incomingNodes.clone(),c.newExpressions.clone().addAll(b.new1(g).removeAll(c.oldExpressions)),c.oldExpressions.clone().add(g),c.nextExpressions.clone().addAll(b.next1(g))),i=new a.GraphNode(a.GraphNode.newName(),c.incomingNodes.clone(),c.newExpressions.clone().addAll(b.new2(g).removeAll(c.oldExpressions)),c.oldExpressions.clone().add(g),c.nextExpressions.clone());return b.expand(i,b.expand(h,d));case 2:return b.expand(new a.GraphNode(c.name,c.incomingNodes.clone(),c.newExpressions.clone().addAll(a.Set.fromArray([g.subExpression1(),g.subExpression2()]).removeAll(c.oldExpressions)),c.oldExpressions.clone().add(g),c.nextExpressions),d);case 6:return b.expand(new a.GraphNode(c.name,c.incomingNodes.clone(),c.newExpressions.clone(),c.oldExpressions.clone().add(g),c.nextExpressions.clone().add(g.subExpression1())),d)}},b.createGraph=function(c){a.GraphNode.resetCounter();var d=a.GraphNode.initialNode(),e=b.expand(new a.GraphNode(a.GraphNode.newName(),a.Set.singleton(d),a.Set.singleton(b.negationNormalForm(c)),a.Set.empty(),a.Set.empty()),a.Set.empty());return e.add(d),e},b.next1=function(b){switch(b.type){case 4:return(new a.Set).add(b);case 5:return(new a.Set).add(b);case 3:return new a.Set;default:return void 0}},b.new1=function(b){switch(b.type){case 4:return(new a.Set).add(b.subExpression1());case 5:return(new a.Set).add(b.subExpression2());case 3:return(new a.Set).add(b.subExpression1());default:return void 0}},b.new2=function(b){switch(b.type){case 4:return(new a.Set).add(b.subExpression2());case 5:return(new a.Set).add(b.subExpression1()).add(b.subExpression2());case 3:return(new a.Set).add(b.subExpression2());default:return void 0}},b.negationNormalForm=function(c){switch(c.type){case 0:return c;case 3:return new a.Or(b.negationNormalForm(c.subExpression1()),b.negationNormalForm(c.subExpression2()));case 2:return new a.And(b.negationNormalForm(c.subExpression1()),b.negationNormalForm(c.subExpression2()));case 4:return new a.Until(b.negationNormalForm(c.subExpression1()),b.negationNormalForm(c.subExpression2()));case 5:return new a.Release(b.negationNormalForm(c.subExpression1()),b.negationNormalForm(c.subExpression2()));case 6:return new a.Next(b.negationNormalForm(c.subExpression1()));case 1:var d=c.subExpression1();switch(d.type){case 3:return new a.And(b.negationNormalForm(new a.Not(d.subExpression1())),b.negationNormalForm(new a.Not(d.subExpression2())));case 2:return new a.Or(b.negationNormalForm(new a.Not(d.subExpression1())),b.negationNormalForm(new a.Not(d.subExpression2())));case 4:return new a.Release(b.negationNormalForm(new a.Not(d.subExpression1())),b.negationNormalForm(new a.Not(d.subExpression2())));case 5:return new a.Until(b.negationNormalForm(new a.Not(d.subExpression1())),b.negationNormalForm(new a.Not(d.subExpression2())));case 6:return new a.Next(b.negationNormalForm(new a.Not(d.subExpression1())));case 1:return b.negationNormalForm(d.subExpression1());case 0:return c}}},b.graphNodesToString=function(a){return a.map(function(a){return a.toPrettyString()}).join(", ")},b.loopPredicate=function(a){return function(b){return b.oldExpressions.equals(a.oldExpressions)&&b.nextExpressions.equals(a.nextExpressions)}},b}();a.GraphFactory=b}(ayttm||(ayttm={}));var ayttm;!function(a){var b=function(){function a(){this.map={}}return a.prototype.add=function(a){return this.map[a.toString()]=a,this},a.prototype.remove=function(a){return delete this.map[a.toString()],this},a.prototype.equals=function(a){for(var b in a.map)if(!this.map[b])return!1;for(var b in this.map)if(!a.map[b])return!1;return!0},a.prototype.addAll=function(a){for(var b in a.map)this.add(a.map[b]);return this},a.prototype.removeAll=function(a){for(var b in a.map)this.remove(a.map[b]);return this},a.prototype.clear=function(){for(var a in this.map)this.remove(this.map[a]);return this},a.prototype.isEmpty=function(){return 0==Object.keys(this.map).length},a.prototype.addValueForKey=function(a,b){return this.map[a]=b,this},a.prototype.clone=function(){var b=new a;return b.addAll(this),b},a.prototype.item=function(){return this.isEmpty()?null:this.map[Object.keys(this.map)[0]]},a.prototype.size=function(){return Object.keys(this.map).length},a.fromArray=function(b){for(var c=new a,d=0;d<b.length;++d)c.add(b[d]);return c},a.singleton=function(b){return(new a).add(b)},a.empty=function(){return new a},a.prototype.filter=function(b){var c=a.empty();for(var d in this.map)b(this.map[d])&&c.add(this.map[d]);return c},a.prototype.filterOne=function(a){return this.filter(a).item()},a.prototype.toArray=function(){var a=[];for(var b in this.map)a.push(this.map[b]);return a},a.prototype.valueForKey=function(a){return this.map[a]},a.prototype.contains=function(a){return void 0!==this.map[a.toString()]},a.prototype.intersects=function(a){for(var b in this.map)if(a.map[b])return!0;return!1},a}();a.Set=b}(ayttm||(ayttm={}));var ayttm;!function(a){var b=function(){function b(a,b,c,d,e){this.name=a,this.incomingNodes=b,this.newExpressions=c,this.oldExpressions=d,this.nextExpressions=e,this.final=!1}return b.initialNode=function(){return new b(b.initialNodeName,a.Set.empty(),a.Set.empty(),a.Set.empty(),a.Set.empty())},b.newName=function(){return b.counter=b.counter+1,"Node_"+b.counter.toString()},b.prototype.toString=function(){return this.name},b.prototype.toPrettyString=function(){return"{ name: "+this.name+", incoming : {"+this.incomingNodes.toArray().map(function(a){return a.name}).join(", ")+"} }"},b.resetCounter=function(){b.counter=0},b.counter=0,b.initialNodeName="init",b}();a.GraphNode=b}(ayttm||(ayttm={}));var ayttm;!function(a){var b=function(){function a(){}return a.isDOMEvent=function(a){return void 0!==a.css},a.TimeoutEvent={name:"timeout"},a.TrueEvent={name:"true"},a.FalseEvent={name:"false"},a}();a.LTLEvents=b}(ayttm||(ayttm={}));var __extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c},ayttm;!function(a){function b(a){switch(a.type){case 6:return b(a.subExpression1());case 1:var d=a.subExpression1();switch(d.type){case 0:return!d.hasTrigger()}return b(d);case 0:return!0;case 3:case 2:return b(a.subExpression1())&&b(a.subExpression2());case 4:case 5:return!c(a.subExpression1())&&b(a.subExpression2())||!c(a.subExpression2())&&b(a.subExpression1())}}function c(a){switch(a.type){case 6:case 1:return c(a.subExpression1());case 0:return a.hasTrigger();case 3:case 4:case 2:case 5:return c(a.subExpression1())||c(a.subExpression2())}}!function(a){a[a.Proposition=0]="Proposition",a[a.Not=1]="Not",a[a.And=2]="And",a[a.Or=3]="Or",a[a.Until=4]="Until",a[a.Release=5]="Release",a[a.Next=6]="Next"}(a.ExpressionType||(a.ExpressionType={}));var d=a.ExpressionType,e=function(){function a(b){this.type=b,a.counter=a.counter+1,this.id="Exp_"+a.counter.toString()}return a.prototype.subExpression1=function(){return void 0},a.prototype.subExpression2=function(){return void 0},a.prototype.toString=function(){return this.id},a.prototype.toPrettyString=function(){return this.id},a.counter=0,a}();a.Expression=e;var f=function(a){function b(b,c){a.call(this,c),this.exp=b,this.type=c}return __extends(b,a),b.prototype.subExpression1=function(){return this.exp},b.prototype.toPrettyString=function(){return d[this.type]+" ("+this.subExpression1().toPrettyString()+")"},b}(e);a.UnaryExpression=f;var g=function(a){function b(b,c,d){a.call(this,d),this.exp1=b,this.exp2=c,this.type=d}return __extends(b,a),b.prototype.subExpression1=function(){return this.exp1},b.prototype.subExpression2=function(){return this.exp2},b.prototype.toPrettyString=function(){return"("+this.subExpression1().toPrettyString()+" "+d[this.type]+" "+this.subExpression2().toPrettyString()+")"},b}(e);a.BinaryExpression=g;var h=function(b){function c(a){b.call(this,0),this.event=a}return __extends(c,b),c.prototype.matches=function(b){return!(a.LTLEvents.TrueEvent.name!==this.event.name&&(b.name!==this.event.name||a.LTLEvents.isDOMEvent(b)&&this.isDOMEvent()&&b.css!==this.event.css||this.hasFilter()&&!this.event.filter(b)))},c.prototype.toPrettyString=function(){return this.event.name+(this.event.css?":"+this.event.css:"")+(this.hasTrigger()?":Trigger":"")},c.prototype.hasTrigger=function(){return void 0!=this.event.trigger},c.prototype.hasFilter=function(){return void 0!=this.event.filter},c.prototype.applyTrigger=function(a){this.hasTrigger()&&this.event.trigger(a)},c.prototype.isDOMEvent=function(){return void 0!=this.event.css},c}(e);a.Proposition=h;var i=function(a){function b(b,c){a.call(this,b),this.event=b,this.symbolicTrigger=c}return __extends(b,a),b}(h);a.PropositionWithSymbolicTrigger=i;var j=function(a){function b(b){a.call(this,b,1),this.exp=b}return __extends(b,a),b}(f);a.Not=j;var k=function(a){function b(b){a.call(this,b,6),this.exp=b}return __extends(b,a),b}(f);a.Next=k;var l=function(a){function b(b,c){a.call(this,b,c,2),this.exp1=b,this.exp2=c}return __extends(b,a),b}(g);a.And=l;var m=function(a){function b(b,c){a.call(this,b,c,3),this.exp1=b,this.exp2=c}return __extends(b,a),b}(g);a.Or=m;var n=function(a){function b(b,c){a.call(this,b,c,4),this.exp1=b,this.exp2=c}return __extends(b,a),b}(g);a.Until=n;var o=function(a){function b(b,c){a.call(this,b,c,5),this.exp1=b,this.exp2=c}return __extends(b,a),b}(g);a.Release=o,a.True=new h(a.LTLEvents.TrueEvent),a.False=new h(a.LTLEvents.FalseEvent),a.Timeout=new h(a.LTLEvents.TimeoutEvent),a.checkForRestrictionsOnTriggers=b}(ayttm||(ayttm={}));var ayttm;!function(a){!function(a){a[a.vortex=0]="vortex",a[a.debug=1]="debug",a[a.info=2]="info",a[a.error=3]="error"}(a.LogLevel||(a.LogLevel={}));var b=(a.LogLevel,function(){function a(){}return a.logStringAtLevel=function(b,c){c<=a.level&&console.log("function"==typeof b.toPrettyString?b.toPrettyString():b.toString())},a.debug=function(b){a.logStringAtLevel(b,1)},a.info=function(b){a.logStringAtLevel(b,2)},a.error=function(b){a.logStringAtLevel(b,3)},a.level=0,a}());a.Logger=b}(ayttm||(ayttm={}));var ayttm;!function(a){var b=function(){function a(){this.map={}}return a.prototype.put=function(a,b){return this.map[a.toString()]=b,this},a.prototype.remove=function(a){return delete this.map[a.toString()],this},a.prototype.addValueForKey=function(a,b){return this.map[a.toString()]=b,this},a.prototype.valueForKey=function(a){return this.map[a]},a.prototype.contains=function(a){return void 0!==this.map[a.toString()]},a}();a.Map=b}(ayttm||(ayttm={}));var ayttm;!function(a){var b=function(){function a(a){this.milliseconds=a}return a.prototype.callbackFromDocumentService=function(a){var b=this;return function(){a.startTimer(b.milliseconds)}},a}();a.StartTimer=b;var c=function(){function a(a,b){this.cssSelector=a,this.cssClass=b}return a.prototype.callbackFromDocumentService=function(a){var b=this;return function(){a.addClass(b.cssSelector,b.cssClass)}},a}();a.AddClass=c;var d=function(){function a(a,b){this.cssSelector=a,this.cssClass=b}return a.prototype.callbackFromDocumentService=function(a){var b=this;return function(){a.removeClass(b.cssSelector,b.cssClass)}},a}();a.RemoveClass=d;var e=function(){function a(a,b){this.cssSelector=a,this.cssClass=b}return a.prototype.callbackFromDocumentService=function(a){var b=this;return function(){a.toggleClass(b.cssSelector,b.cssClass)}},a}();a.ToggleClass=e;var f=function(){function a(a,b){this.cssSelector=a,this.containerSelector=b}return a.prototype.callbackFromDocumentService=function(a){var b=this;return function(c){a.trackMouseMovement(b.cssSelector,b.containerSelector,c)}},a}();a.TrackMouseMovement=f}(ayttm||(ayttm={}));var ayttm;!function(a){var b=function(){function b(a){this.eventListener=a}return b.prototype.startTimer=function(b){var c=this;this.clearTimeout(),this.timeoutId=setTimeout(function(){c.eventListener.accept(a.LTLEvents.TimeoutEvent)},b),a.Logger.debug("Started timeout "+this.timeoutId)},b.prototype.clearTimeout=function(){void 0!=this.timeoutId&&(a.Logger.debug("Clearing timeout "+this.timeoutId),clearTimeout(this.timeoutId),this.timeoutId=void 0)},b.prototype.applyToQueryResult=function(a,b){for(var c=document.querySelectorAll(a),d=0;d<c.length;++d)b(c.item(d))},b.prototype.addListenerToDocumentElements=function(a,b){var c=this;this.applyToQueryResult(a,function(d){d.addEventListener(b,function(d){c.eventListener.accept({name:b,css:a,source:d})})})},b.prototype.addClass=function(b,c){this.applyToQueryResult(b,function(d){d.classList.contains(c)?a.Logger.debug(b+" already has "+c):(d.classList.add(c),a.Logger.debug("Added "+c+" on "+b))})},b.prototype.removeClass=function(b,c){this.applyToQueryResult(b,function(d){d.classList.remove(c),a.Logger.debug("Removed "+c+" on "+b)})},b.prototype.toggleClass=function(a,b){this.applyToQueryResult(a,function(a){a.classList.toggle(b)})},b.prototype.show=function(a){this.css(a,"display","block")},b.prototype.hide=function(a){this.css(a,"display","none")},b.prototype.css=function(a,b,c){this.applyToQueryResult(a,function(a){a.style[b]=c})},b.prototype.trackMouseMovement=function(a,b,c){var d=this,e=document.querySelector(b),f=e.getBoundingClientRect();this.applyToQueryResult(a,function(a){var b=d.numberFromPixels(a.style.top?a.style.top:a.offsetTop),e=d.numberFromPixels(a.style.left?a.style.left:a.offsetLeft),g=d.numberFromPixels(a.style.width?a.style.width:a.offsetWidth),h=d.numberFromPixels(a.style.height?a.style.height:a.offsetHeight);a.style.top=Math.min(f.top+f.height-h,Math.max(f.top,b+(c.source.clientY-c.otherPreviousEvent.clientY)))+"px",a.style.left=Math.min(f.left+f.width-g,Math.max(f.left,e+(c.source.clientX-c.otherPreviousEvent.clientX)))+"px"})},b.prototype.numberFromPixels=function(a){return"number"==typeof a?a:"string"==typeof a?parseInt(a.replace("px","")):void 0},b}();a.BasicUIDocumentService=b}(ayttm||(ayttm={}));